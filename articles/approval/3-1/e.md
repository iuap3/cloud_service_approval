# 流程

在云审批中的流程菜单中可以创建流程模型，设计流程并提供流程的删除、导入、导出功能。

![](/articles/approval/3-1/images/image15.png)

## 创建新流程

点击上图中的“创建新流程”后进入流程名称填写界面，填写流程名称，点回车键后进入发起方式界面，如下图：

![](/articles/approval/3-1/images/image16.png)

流程发布后，用户发起业务流程时需要填写所配置的单据信息才可以点击完成，完成申请的提交；

下面以“报销单demo”为例介绍如何设计单据和流程并发布，如下图：

![](/articles/approval/3-1/images/image17.png)

申请时需要填写的单据设计时有两种方式：1.直接选择系统提供的表单模板，使用后表单模板中的字段自动会添加过来，可以继续编辑和设计字段信息，也可以直接使用；2.全新添加字段，设置字段属性即可。

字段中所涉及到的公共属性：

描述：字段的描述信息，如果有描述信息但没有初值，则填写单据时输入框中会显示描述信息；如果字段设置了初值，填写单据时显示初值，删除初值后会显示描述信息；

初值：设置字段的默认值

设置为关键特性：设置为关键特性后，pc端在任务列表会显示该字段的值；微信端，在查看或办理任务时，任务办理情况界面上方会单独显示出该字段和该字段的值；

必输项：必输项设置后，在单据填写界面会有红色的星号提示必须填写，如果未填写，点击任务的完成或同意时会提示必须填写；

其他属性不再详细介绍。

![](/articles/approval/3-1/images/image18.png)

如果想删除添加的字段，在字段属性界面的右上角有一个垃圾桶图标

![](/articles/approval/3-1/images/image19.png)

点击后，会出现确定删除图标

![](/articles/approval/3-1/images/image20.png)

取消删除图标

![](/articles/approval/3-1/images/image21.png)

点击确定删除的图标即可删除该字段；

如果还想使用已经删除的字段，那么很简单，该界面最下方的可用字段中显示了删除了的字段，选择后，删除的字段自动添加到单据上，可继续使用；

如果字段的显示顺序不符合要求，可点中字段后拖动到所需要放的其他字段上下完成单据字段位置的调整；

如果表单涉及到子表，可点击增加子表单中的表单，添加表单然后拖动相应的字段类型到子表单并设置属性即可完成子表单的设计；

完成单据设计后，点击“发布表单，下一步创建流程”，进入到流程设计界面，如下介绍 

## 设计流程

在流程设计界面，可通过两种方式设计流程，一种是通过元素上的浮动图标添加，一种是通过拖动元素到设计区后再通过浮动的连接线图标完成元素之间的连接即可，如下图：

![](/articles/approval/3-1/images/image22.png)

选中设计区的元素后，则显示浮动图标及属性，可通过浮动图标继续添加后续的任务，条件，结束等；在属性界面，设置元素的属性，以“任务”为例，如上图：

![](/articles/approval/3-1/images/image23.png)

活动名称：在请输入名称的输入框中输入活动名称；

### 参与人属性设置 

参与人页签，切换到参与人属性设置界面：

**从用户，用户组（角色），部门或岗位中选择处理人**：

选择用户：选择该活动上的办理人，光标定位到该输入框后会以下拉选项的方式显示当前租户及当前租户下的用户，选择后即可；

选择用户组：选择该活动上的用户组，选择用户组后，该用户组下的用户均可办理该业务，用户组的添加请参照【组织机构】中的【分组】；

选择部门：选择该活动上的组织机构，选择组织机构后，该组织机构下的用户均可办理该业务，这里指的部门，部门的添加请参照【组织机构】中的【部门】；

选择部门负责人：直接选择部门来获取部门负责人信息，只需直接选择部门即可；

岗位：选择岗位，支持岗位里的人作为参与人；

**从流程中选择审批人**：

发起人：快捷的设置参与人为发起人的方式；

上一个环节审批人的部门负责人：快捷设置参与人的方式，快捷选择发起人或上一环节处理人的部门负责人；

上一环节处理人的上级部门负责人：快捷设置参与人的方式，快捷选择发起人或上一环节处理人的上一级部门负责人；

从表单数据中选择审批人：将单据中选择的用户作为任务的参与人；

**高级配置**：

制单人同组织：是否限定用户为制单人同组织

制单人同部门：是否限定用户为制单人同部门

### 抄送人设置

抄送人页签，切换到抄送人醒属性设置界面

![](/articles/approval/3-1/images/image24.png)

选择用户：支持选择用户作为抄送人；

部门负责人：支持选择部门将选择部门的负责人作为抄送人；

如果这里设置了抄送人，提交业务时也临时选择了抄送人，那么抄送的范围为这里设置的加临时选择的人员会收到抄送任务。

### 时限设置

时限页签，切换到时限属性设置界面

![](/articles/approval/3-1/images/image25.png)

支持设置完成任务的时限，支持天、小时的时限设置，如果都设置了则是天+小时的超时计算方式。

### 操作设置

任务页签，切换到任务属性设置界面：

![](/articles/approval/3-1/images/image26.png)

可指派：可将任务指派给其他用户进行办理；

可加签：加签后，被加签人必须办理之后，任务的办理人才可以继续办理；

可驳回：设置可驳回后，业务办理时可将该活动上的任务驳回到已经提交过的活动上去，等同可退回；比如有个流程按顺序有三个活动a,b,c,c活动上设置了可驳回，c上的参与人办理时点击驳回时，可驳回到a或b上；

可改派：允许当前办理人把任务转移给他人处理；

会签：如果环节上多人办理时，不设置会签时默认是抢占模式，多人中的某一个人办理后其他人的任务就删除了，如果设置了会签则所有的人并行处理完成后才任务才可以继续流转到后面的环节；

连岗合办：如果下一个环节的办理人跟当前环节的办理人是同一个，如果后一个环节上设置了连岗合办，则当前办理人办理后，后面的环节直接通过，无需多次审批；

### 表单设置

表单页签，切换到表单属性设置界面：

![](/articles/approval/3-1/images/image27.png)

关联主表单：设置关联表单后，此环节上的办理人可修改主单据的单据数据；

新建环节单据：设置环节上需要新填写的单据，但此时不可选择关联表单了；

### 提醒设置

提醒页签，切换到提醒属性设置界面： 

![](/articles/approval/3-1/images/image28.png)

事件：选择需要发送提醒的事件，比如创建，就是创建该活动的任务时发送提醒，完成，就是完成该活动上的任务时发送提醒；

提醒：提醒方式为：邮件提醒，短信提醒，IM消息，钉钉消息，从不同入口进入云审批，消息的提醒方式不同。设置事件提醒后当事件完成时会根据提醒方式发送不同类型的提醒信息；

![](/articles/approval/3-1/images/image29.png)

流程属性设置好之后发布流程，发布修改后即可在发起申请了。

## 编辑流程

在流程列表中点击流程名称后的小铅笔图标进入流程修改界面，此时可修改该流程名称和流程所在的目录，修改后保存即可；

![](/articles/approval/3-1/images/image30.png)

## 导入流程

将本地文件目录下流程XML文件导入到系统中。点击“导入流程”按钮，显示文件导入页面，如下图所示：

![](/articles/approval/3-1/images/image31.png)

图：流程导入页面

本地文件目录选择要导入的流程定义XML文件，点击“打开”按钮，系统对XML文件进行校验，如校验成功，在流程列表中能看到导入流程；如果想放弃本次操作，点击“取消”按钮。

## 导出流程

点击流程列表中的下载图标

![](/articles/approval/3-1/images/image32.png)

点击后可将该流程的xml保存到本地。

## 删除流程

在流程列表点击垃圾桶图标

![](/articles/approval/3-1/images/image33.png)

点击该图标后会弹出确定删除的提示框，输入信息，点击“删除”按钮，删除流程，删除成功；点击“取消”按钮，放弃本次删除操作。

![](/articles/approval/3-1/images/image34.png)

注:已有流程实例的流程会提示有多少条待办和已办，也允许删除，但会同步删除流程实例。











